syntax = "proto3";
package marsproto;

option go_package = ".;marsproto";

message ServerMessage {
    oneof data {
        Acknowledge ack = 100;
        ActionRequest request = 101;
        Announce announce = 102;
    }   
}

message Acknowledge {
    enum AckType {
        Accepted = 0;
        Retry = 1;
        Rejected = 2;
    }
    int64 id = 1;
    int64 player = 2;

    AckType ack = 100;
    map<string, string> params = 101;
}

message ActionRequest {
    int64 id = 1;
    int64 player = 2;

    string action = 3;

    oneof message {
        int64 value = 100;
    }
}

message ReadResponse {
    int64 id = 1;
    int64 player = 2;

    oneof message {
        int64 value = 100;
    }
}

message Announce {
    int64 id = 1;
    int64 target = 2;

    enum Resource {
        NO_ACTION = 0;
        START_GAME = 1;
    }

    Resource resource = 3;
    map<string, string> params = 4;
}

// shared objects